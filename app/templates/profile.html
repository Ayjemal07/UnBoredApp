{% extends 'base.html' %}

{% block content %}
<section class="bg-light text-light text-center shadow mb-20">
    <div class="container p-5 bg-light">
        <div class="row">
            <div class="d-md-flex bg-light align-items-center justify-content-evenly">
                <h1 class="col text-center">{{ current_user.customer_name }}'s Profile</h1>
            </div>
        </div>
    </div>
</section>

<section class="text-center">
    <div class="container p-10">
        <div class="row">
            <h3 class="p-5">Here are your profile details:</h3>
            <ul class="list-group" id="profileDetails">
                <li class="list-group-item">Email: {{ current_user.email }}</li>
                <li class="list-group-item">Name: {{ current_user.customer_name }}</li>
                <li class="list-group-item">Age: {{ current_user.age }}</li>
                <li class="list-group-item">Location: {{ current_user.location }}</li>
                <li class="list-group-item">Interests: {{ current_user.interests }}</li>
                <li class="list-group-item">Preferred Activity Types: {{ current_user.activity_types }}</li>
                <li class="list-group-item">Physical Levels: {{ current_user.physical_levels }}</li>
                <li class="list-group-item">Physical Limitations: {{ current_user.limitations }}</li>
                <li class="list-group-item">Primary Goals: {{ current_user.primary_goals }}</li>
                <li class="list-group-item">Budget: {{ current_user.budget }}</li>
                <li class="list-group-item">Available Time: {{ current_user.available_time }}</li>
            </ul>
            <button id="editButton" class="btn btn-secondary" onclick="toggleEdit()">Edit</button>
        </div>
        
        <div class="row d-none" id="editFormContainer" style="margin-top: 20px;">
            <h3 class="p-5">Edit your profile details</h3>
            <form action="{{ url_for('crud.update_user', token=current_user.token) }}" method="POST" class="w-75 mx-auto">
                <div class="form-group">
                    <label for="name">Name:</label>
                    <input type="text" class="form-control" id="name" name="name" value="{{ current_user.name }}" required>
                </div>
                <div class="form-group">
                    <label for="age">Age:</label>
                    <input type="number" class="form-control" id="age" name="age" value="{{ current_user.age }}" required>
                </div>
                <div class="form-group">
                    <label for="location">Location:</label>
                    <input type="text" class="form-control" id="location" name="location" value="{{ current_user.location }}" required>
                </div>
                <div class="form-group">
                    <label for="interests">Interests:</label>
                    <input type="text" class="form-control" id="interests" name="interests" value="{{ current_user.interests }}" required>
                </div>
                <div class="form-group">
                    <label for="activityTypes">Preferred Activity Types:</label>
                    <input type="text" class="form-control" id="activityTypes" name="activityTypes" value="{{ current_user.activityTypes }}" required>
                </div>
                <div class="form-group">
                    <label for="physicalLevel">Physical Levels:</label>
                    <input type="text" class="form-control" id="physicalLevel" name="physicalLevel" value="{{ current_user.physicalLevel }}" required>
                </div>
                <div class="form-group">
                    <label for="limitations">Physical Limitations:</label>
                    <input type="text" class="form-control" id="limitations" name="limitations" value="{{ current_user.limitations }}">
                </div>
                <div class="form-group">
                    <label for="primaryGoal">Primary Goals:</label>
                    <input type="text" class="form-control" id="primaryGoal" name="primaryGoal" value="{{ current_user.primaryGoal }}" required>
                </div>
                <div class="form-group">
                    <label for="budget">Budget:</label>
                    <input type="text" class="form-control" id="budget" name="budget" value="{{ current_user.budget }}" required>
                </div>
                <div class="form-group">
                    <label for="available_time">Available Time:</label>
                    <input type="text" class="form-control" id="available_time" name="available_time" value="{{ current_user.available_time }}" required>
                </div>
                <button type="button" class="btn btn-secondary" onclick="toggleEdit()">Cancel</button>
                <button type="submit" class="btn btn-primary">Save Changes</button>
            </form>
        </div>
    </div>
</section>

<script>
function toggleEdit() {
    var profileDetails = document.getElementById('profileDetails');
    var editFormContainer = document.getElementById('editFormContainer');
    var editButton = document.getElementById('editButton');
    
    if (profileDetails.classList.contains('d-none')) {
        profileDetails.classList.remove('d-none');
        editFormContainer.classList.add('d-none');
        editButton.textContent = 'Edit';
    } else {
        profileDetails.classList.add('d-none');
        editFormContainer.classList.remove('d-none');
        editButton.textContent = 'Cancel';
    }
}
</script>
{% endblock %}
